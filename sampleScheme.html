<html lang="ko">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<style type="text/css">
    #container {
        margin-top: 30pt;
    }

    button {
        background-color: gray;
        border: none;
        padding: 10pt;
        font-size: 20pt;
        width: 80%;
    }
</style>
<script type="text/javascript">
    function alertTest() {
        alert('alertTest');
    }
    function callNative1(message) {
        try {
            webkit.messageHandlers.callbackHandler.postMessage("MessageBody");
        } catch (err) {
            alert(err);
        }
    }
    function callNative2(message) {
        try {
            var message = {
                'EVENT': 'IMAGE',
                'DATA': {
                    'url': 'https://raw.githubusercontent.com/jogiking/test_web/main/1.png',
                    'fileSize': 115342,
                    'width': 348,
                    'height': 346,
                    'fileName': '상냥한 비버 소녀 루피'
                },
                'ERROR': {
                    'STATE': false,
                    'CODE': "901"
                }
            };
            webkit.messageHandlers.callbackHandler.postMessage(JSON.stringify(message));
        } catch (err) {
            alert(err);
        }
    }
    function callNative3() {
        try {
            var message = {
                'type': 'download',
                'data': {
                    'url': 'https://raw.githubusercontent.com/jogiking/test_web/main/2.png',
                    'fileSize': 151431,
                    'width': 288,
                    'height': 352,
                    'fileName': '버거킹 루피'
                }
            };
            webkit.messageHandlers.callbackHandler.postMessage(JSON.stringify(message));
        } catch (err) {
            alert(err);
        }
    }
    function callNative4() {
        try {
            var message = {
                'type': 'backgroundColor',
                'data': {
                    'rgb': "#123456"
                }
            };
            webkit.messageHandlers.callbackHandler.postMessage(JSON.stringify(message));
        } catch (err) {
            alert(err);
        }
    }

</script>

<body>
    <h1> WKWebView JS -> Swift alert테스트 <br /></h1>
    <h1> <a href="javascript:alertTest();">Alert Test</a> </h1> <br /><br />

    <h1> WKWebView JS -> Swift postMessage테스트 <br /></h1>

    <div id='container' align='center'>
        <button onclick='callNative1();'>파라미터 1개 문자열</button></br>
        <button onclick='callNative2();'>(1) 파라미터 2개 오브젝트 + JSON.stringify</button></br>
        <button onclick='callNative3();'>(2) 파라미터 2개 오브젝트 + JSON.stringify</button></br>
        <button onclick='callNative4();'>다른 이벤트 전송</button></br>
        <input id='mymyfile'type="file"/> id=mymyfile<br>
        <input type="file"/>
    </div>

</body>

</html>
